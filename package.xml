<project name="package-glean" default="package" basedir=".">
    <description>Create a distribution of Glean</description>
    
    <property name="version"   value="1.0b"/>
    <property name="dist.name" value="glean-${version}"/>
    <property name="dist.dir"  value="dist"/>
    <property name="doc.dir"   value="doc"/>
    <property name="log.dir"   value="logs"/>
    <property name="dist.docs" value="target"/>
    <property name="glean.dir" value="${basedir}"/>

    <target name="doc" 
	    description="Build the tool documentation">
        <ant dir="${doc.dir}" target="">
            <property name="docs.dest" value="${dist.docs}"/>
        </ant>
    </target>
    
    <target name="package"
        depends="doc"
    	description="Package up a distribution">
        <mkdir dir="${dist.dir}"/>
        
        <zip destfile="${dist.dir}/${dist.name}.zip">
            <zipfileset dir="${doc.dir}/${dist.docs}" prefix="docs">
                <include name="**/*.html"/>
                <include name="**/*.css"/>
            </zipfileset>
            <fileset dir="${glean.dir}">
                <exclude name="${ant.file.name}"/>
                <exclude name="${dist.dir}/"/>
                <exclude name="${doc.dir}/"/>
                <exclude name="${log.dir}/"/>
                <exclude name="**/*.log"/>
                <exclude name="**/*.properties.local"/>                
            </fileset>
        </zip>
    </target>
    
    <target name="release"
        depends="package"
    	description="Copy a distribution out to the server">
        
    </target>
    
    <target name="publish-docs" 
        depends="doc"
    	description="Publish the documentation pages to the server">
        
    </target>
    
    <target name="clean"
        depends="clean-docs"
        description="Delete generated files">
        <delete dir="${dist.dir}"/>
    </target>
    
    <target name="clean-docs">
        <ant dir="${doc.dir}" target="clean"/>
    </target>
    
</project>
