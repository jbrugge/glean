<?xml version="1.0" encoding="UTF-8"?>
<document>

  <properties>
    <author email="john@jbrugge.com">John Brugge</author>
    <title>Glean : Documentation</title>
  </properties>

<body>
<section name="Using Glean">
<p>
Supppose you have a project with a file layout like this. It may have other
directories, but these are the ones most important to Glean:
<pre>
    myproject
        src
        bin
        lib
        ...
</pre>
</p><p>
Unpack the Glean files to a directory anywhere you want.
From a command prompt, go to that directory and run this command:
<pre>
    ant -Dproject.root=/path/to/myproject
</pre>
</p><p>
This will run all of the tools in the basic setup. The results will be simple HTML
files, along with a summary page, that you can distribute any way you wish.
</p><p>
If your project layout is different than this, there are a number of ways to
specify that. (describe overriding areas).
</p>
</section>

<section name="Publishing The Results">
<p>
The results will, by default, be generated as subdirectories under <code>myproject/glean</code>,
one subdirectory per tool. The script will also package all of them up as a WAR
that can be deployed to a simple servlet engine. Or the files can simply be copied
to the documentation area of a simple web server to be served up for your team.
</p>
<p>
Direct access to the results
    myprojects/reports/index.html
</p>
<p>
Packaging the results after running the reports
</p>
<pre>
    ant -Dproject.root=/path/to/myproject package-reports
</pre>

<p>
Run reports, package and deploy (see section on Property Settings)
</p>
<pre>
    ant -Dproject.root=/path/to/myproject all
</pre>

PREREQUISITES
Ant 1.6.5
JDK 1.4
</section>

<section name="Configuration">
<p>
The basic use of Glean assumes a simple project structure like above, but
many other structures can be handled by adjusting properties that are used. The
key properties are in the file report.properties. Overriding their values follows
the rules of Ant property overrides. That is to say that you can choose different
levels of overrides.
</p>
<ul>
    <li>properties specified on the command-line with "-Dproperty=value"</li>
    <li>myproject/report.properties.local - settings that are specific to a particular
                                        user of Glean for myproject</li>
    <li>myproject/report.properties - settings that are specific to myprojecct</li>
    <li>Glean/report/(tool dir)/report.properties.local - settings specific to
                                        this tool for this installation</li>
    <li>Glean/report/(tool.dir)/report.properties - settings specific to this tool</li>
    <li>Glean/report.properties - default properties settings</li>
</ul>    
</section>

<section name="Defining Project Directory Layout">
</section>

<section name="Selecting Tools To Use">
<p>
The "report.pattern" property determines which tools are run. It's value is a
standard Ant glob pattern. The default pattern is to run all tools.
</p>
<pre>
    tool.pattern="*"
</pre>
<p>
To run a selected set of tools, list them out, separated by commas.
</p>
<pre>
    tool.pattern="pmd,cpd,javadoc"
</pre>
</section>

<section name="Changing the report look">
<p>
The reports use a stylesheet called "reports.css". Change this in any way that
you want. It is based on a number of styles from the standard stylesheets that
come with Ant.
</p>
</section>
</body>
</document>
